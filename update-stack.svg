<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.38.0 (20140413.2041)
 -->
<!-- Title: update_stack Pages: 1 -->
<svg width="582pt" height="1219pt"
 viewBox="0.00 0.00 582.48 1218.82" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1214.82)">
<title>update_stack</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-1214.82 578.483,-1214.82 578.483,4 -4,4"/>
<!-- CREATE_COMPLETE -->
<g id="node1" class="node"><title>CREATE_COMPLETE</title>
<ellipse fill="none" stroke="black" cx="242.185" cy="-1192.82" rx="94.7242" ry="18"/>
<text text-anchor="middle" x="242.185" y="-1188.62" font-family="Times,serif" font-size="14.00">CREATE_COMPLETE</text>
</g>
<!-- UPDATE_IN_PROGRESS -->
<g id="node4" class="node"><title>UPDATE_IN_PROGRESS</title>
<ellipse fill="none" stroke="black" stroke-dasharray="1,5" cx="346.185" cy="-1119.82" rx="106.82" ry="18"/>
<text text-anchor="middle" x="346.185" y="-1115.62" font-family="Times,serif" font-size="14.00">UPDATE_IN_PROGRESS</text>
</g>
<!-- CREATE_COMPLETE&#45;&gt;UPDATE_IN_PROGRESS -->
<g id="edge1" class="edge"><title>CREATE_COMPLETE&#45;&gt;UPDATE_IN_PROGRESS</title>
<path fill="none" stroke="black" d="M266.306,-1175.36C280.251,-1165.84 297.993,-1153.72 313.212,-1143.33"/>
<polygon fill="black" stroke="black" points="315.549,-1145.98 321.834,-1137.45 311.602,-1140.2 315.549,-1145.98"/>
</g>
<!-- UPDATE_COMPLETE -->
<g id="node2" class="node"><title>UPDATE_COMPLETE</title>
<ellipse fill="none" stroke="black" cx="450.185" cy="-1192.82" rx="95.2087" ry="18"/>
<text text-anchor="middle" x="450.185" y="-1188.62" font-family="Times,serif" font-size="14.00">UPDATE_COMPLETE</text>
</g>
<!-- UPDATE_COMPLETE&#45;&gt;UPDATE_IN_PROGRESS -->
<g id="edge2" class="edge"><title>UPDATE_COMPLETE&#45;&gt;UPDATE_IN_PROGRESS</title>
<path fill="none" stroke="black" d="M426.064,-1175.36C412.119,-1165.84 394.377,-1153.72 379.157,-1143.33"/>
<polygon fill="black" stroke="black" points="380.768,-1140.2 370.535,-1137.45 376.821,-1145.98 380.768,-1140.2"/>
</g>
<!-- UPDATE_COMPLETE_CLEANUP_IN_PROGRESS -->
<g id="node3" class="node"><title>UPDATE_COMPLETE_CLEANUP_IN_PROGRESS</title>
<ellipse fill="none" stroke="black" stroke-dasharray="1,5" cx="239.185" cy="-844.368" rx="127.253" ry="25.4118"/>
<text text-anchor="middle" x="239.185" y="-847.168" font-family="Times,serif" font-size="14.00">UPDATE_COMPLETE</text>
<text text-anchor="middle" x="239.185" y="-833.168" font-family="Times,serif" font-size="14.00">CLEANUP_IN_PROGRESS</text>
</g>
<!-- try_rollforward_cleanup -->
<g id="node11" class="node"><title>try_rollforward_cleanup</title>
<polygon fill="none" stroke="black" points="336.971,-781.912 141.399,-781.912 141.399,-745.912 336.971,-745.912 336.971,-781.912"/>
<text text-anchor="middle" x="239.185" y="-766.712" font-family="Times,serif" font-size="14.00">Run the ROLLFORWARD plan</text>
<text text-anchor="middle" x="239.185" y="-752.712" font-family="Times,serif" font-size="14.00">(deletes)</text>
</g>
<!-- UPDATE_COMPLETE_CLEANUP_IN_PROGRESS&#45;&gt;try_rollforward_cleanup -->
<g id="edge7" class="edge"><title>UPDATE_COMPLETE_CLEANUP_IN_PROGRESS&#45;&gt;try_rollforward_cleanup</title>
<path fill="none" stroke="black" d="M239.185,-818.544C239.185,-810.21 239.185,-800.87 239.185,-792.348"/>
<polygon fill="black" stroke="black" points="242.685,-792.129 239.185,-782.129 235.685,-792.129 242.685,-792.129"/>
</g>
<!-- try_rollforward_creates_and_updates -->
<g id="node9" class="node"><title>try_rollforward_creates_and_updates</title>
<polygon fill="none" stroke="black" points="443.971,-1064.82 248.399,-1064.82 248.399,-1028.82 443.971,-1028.82 443.971,-1064.82"/>
<text text-anchor="middle" x="346.185" y="-1049.62" font-family="Times,serif" font-size="14.00">Run the ROLLFORWARD plan</text>
<text text-anchor="middle" x="346.185" y="-1035.62" font-family="Times,serif" font-size="14.00">(creates + updates)</text>
</g>
<!-- UPDATE_IN_PROGRESS&#45;&gt;try_rollforward_creates_and_updates -->
<g id="edge3" class="edge"><title>UPDATE_IN_PROGRESS&#45;&gt;try_rollforward_creates_and_updates</title>
<path fill="none" stroke="black" d="M346.185,-1101.64C346.185,-1093.61 346.185,-1083.87 346.185,-1074.89"/>
<polygon fill="black" stroke="black" points="349.685,-1074.85 346.185,-1064.85 342.685,-1074.85 349.685,-1074.85"/>
</g>
<!-- UPDATE_ROLLBACK_COMPLETE -->
<g id="node5" class="node"><title>UPDATE_ROLLBACK_COMPLETE</title>
<ellipse fill="none" stroke="black" cx="147.185" cy="-18" rx="147.37" ry="18"/>
<text text-anchor="middle" x="147.185" y="-13.8" font-family="Times,serif" font-size="14.00">UPDATE_ROLLBACK_COMPLETE</text>
</g>
<!-- UPDATE_ROLLBACK_COMPLETE_CLEANUP_IN_PROGRESS -->
<g id="node6" class="node"><title>UPDATE_ROLLBACK_COMPLETE_CLEANUP_IN_PROGRESS</title>
<ellipse fill="none" stroke="black" stroke-dasharray="1,5" cx="250.185" cy="-293.456" rx="164.522" ry="25.4118"/>
<text text-anchor="middle" x="250.185" y="-296.256" font-family="Times,serif" font-size="14.00">UPDATE_ROLLBACK_COMPLETE</text>
<text text-anchor="middle" x="250.185" y="-282.256" font-family="Times,serif" font-size="14.00">CLEANUP_IN_PROGRESS</text>
</g>
<!-- try_rollback_cleanup -->
<g id="node16" class="node"><title>try_rollback_cleanup</title>
<polygon fill="none" stroke="black" points="333.679,-231 166.691,-231 166.691,-195 333.679,-195 333.679,-231"/>
<text text-anchor="middle" x="250.185" y="-215.8" font-family="Times,serif" font-size="14.00">Run the ROLLBACK plan</text>
<text text-anchor="middle" x="250.185" y="-201.8" font-family="Times,serif" font-size="14.00">(deletes)</text>
</g>
<!-- UPDATE_ROLLBACK_COMPLETE_CLEANUP_IN_PROGRESS&#45;&gt;try_rollback_cleanup -->
<g id="edge15" class="edge"><title>UPDATE_ROLLBACK_COMPLETE_CLEANUP_IN_PROGRESS&#45;&gt;try_rollback_cleanup</title>
<path fill="none" stroke="black" d="M250.185,-267.632C250.185,-259.299 250.185,-249.958 250.185,-241.437"/>
<polygon fill="black" stroke="black" points="253.685,-241.217 250.185,-231.217 246.685,-241.218 253.685,-241.217"/>
</g>
<!-- UPDATE_ROLLBACK_FAILED -->
<g id="node7" class="node"><title>UPDATE_ROLLBACK_FAILED</title>
<ellipse fill="none" stroke="black" cx="443.185" cy="-18" rx="131.097" ry="18"/>
<text text-anchor="middle" x="443.185" y="-13.8" font-family="Times,serif" font-size="14.00">UPDATE_ROLLBACK_FAILED</text>
</g>
<!-- UPDATE_ROLLBACK_IN_PROGRESS -->
<g id="node8" class="node"><title>UPDATE_ROLLBACK_IN_PROGRESS</title>
<ellipse fill="none" stroke="black" stroke-dasharray="1,5" cx="394.185" cy="-568.912" rx="158.981" ry="18"/>
<text text-anchor="middle" x="394.185" y="-564.712" font-family="Times,serif" font-size="14.00">UPDATE_ROLLBACK_IN_PROGRESS</text>
</g>
<!-- try_rollback_creates_and_updates -->
<g id="node14" class="node"><title>try_rollback_creates_and_updates</title>
<polygon fill="none" stroke="black" points="477.679,-513.912 310.691,-513.912 310.691,-477.912 477.679,-477.912 477.679,-513.912"/>
<text text-anchor="middle" x="394.185" y="-498.712" font-family="Times,serif" font-size="14.00">Run the ROLLBACK plan</text>
<text text-anchor="middle" x="394.185" y="-484.712" font-family="Times,serif" font-size="14.00">(creates + updates)</text>
</g>
<!-- UPDATE_ROLLBACK_IN_PROGRESS&#45;&gt;try_rollback_creates_and_updates -->
<g id="edge11" class="edge"><title>UPDATE_ROLLBACK_IN_PROGRESS&#45;&gt;try_rollback_creates_and_updates</title>
<path fill="none" stroke="black" d="M394.185,-550.725C394.185,-542.701 394.185,-532.959 394.185,-523.981"/>
<polygon fill="black" stroke="black" points="397.685,-523.94 394.185,-513.941 390.685,-523.941 397.685,-523.94"/>
</g>
<!-- check_rollforward_creates_and_updates -->
<g id="node10" class="node"><title>check_rollforward_creates_and_updates</title>
<polygon fill="none" stroke="black" points="346.185,-991.823 178.763,-955.823 346.185,-919.823 513.607,-955.823 346.185,-991.823"/>
<text text-anchor="middle" x="346.185" y="-958.623" font-family="Times,serif" font-size="14.00">Did the rollforward creates</text>
<text text-anchor="middle" x="346.185" y="-944.623" font-family="Times,serif" font-size="14.00">&amp; updates all succeed?</text>
</g>
<!-- try_rollforward_creates_and_updates&#45;&gt;check_rollforward_creates_and_updates -->
<g id="edge4" class="edge"><title>try_rollforward_creates_and_updates&#45;&gt;check_rollforward_creates_and_updates</title>
<path fill="none" stroke="black" d="M346.185,-1028.66C346.185,-1021.02 346.185,-1011.62 346.185,-1002.18"/>
<polygon fill="black" stroke="black" points="349.685,-1001.98 346.185,-991.983 342.685,-1001.98 349.685,-1001.98"/>
</g>
<!-- check_rollforward_creates_and_updates&#45;&gt;UPDATE_COMPLETE_CLEANUP_IN_PROGRESS -->
<g id="edge5" class="edge"><title>check_rollforward_creates_and_updates&#45;&gt;UPDATE_COMPLETE_CLEANUP_IN_PROGRESS</title>
<path fill="none" stroke="black" d="M317.792,-925.779C303.107,-910.757 285.158,-892.396 270.121,-877.014"/>
<polygon fill="black" stroke="black" points="272.493,-874.434 263,-869.729 267.488,-879.327 272.493,-874.434"/>
<text text-anchor="middle" x="332.84" y="-890.623" font-family="Times,serif" font-size="14.00">yes (or no&#45;op)</text>
</g>
<!-- check_rollforward_creates_and_updates&#45;&gt;UPDATE_ROLLBACK_IN_PROGRESS -->
<g id="edge6" class="edge"><title>check_rollforward_creates_and_updates&#45;&gt;UPDATE_ROLLBACK_IN_PROGRESS</title>
<path fill="none" stroke="black" d="M367.658,-924.286C380.438,-903.143 394.185,-873.795 394.185,-845.368 394.185,-845.368 394.185,-845.368 394.185,-671.912 394.185,-646.694 394.185,-617.969 394.185,-597.442"/>
<polygon fill="black" stroke="black" points="397.685,-597.237 394.185,-587.237 390.685,-597.238 397.685,-597.237"/>
<text text-anchor="middle" x="401.185" y="-759.712" font-family="Times,serif" font-size="14.00">no</text>
</g>
<!-- check_rollforward_cleanup -->
<g id="node12" class="node"><title>check_rollforward_cleanup</title>
<polygon fill="none" stroke="black" points="239.185,-708.912 112.925,-672.912 239.185,-636.912 365.445,-672.912 239.185,-708.912"/>
<text text-anchor="middle" x="239.185" y="-675.712" font-family="Times,serif" font-size="14.00">Did the rollforward</text>
<text text-anchor="middle" x="239.185" y="-661.712" font-family="Times,serif" font-size="14.00">deletes all succeed?</text>
</g>
<!-- try_rollforward_cleanup&#45;&gt;check_rollforward_cleanup -->
<g id="edge8" class="edge"><title>try_rollforward_cleanup&#45;&gt;check_rollforward_cleanup</title>
<path fill="none" stroke="black" d="M239.185,-745.752C239.185,-738.11 239.185,-728.712 239.185,-719.263"/>
<polygon fill="black" stroke="black" points="242.685,-719.071 239.185,-709.071 235.685,-719.071 242.685,-719.071"/>
</g>
<!-- check_rollforward_cleanup&#45;&gt;UPDATE_ROLLBACK_IN_PROGRESS -->
<g id="edge10" class="edge"><title>check_rollforward_cleanup&#45;&gt;UPDATE_ROLLBACK_IN_PROGRESS</title>
<path fill="none" stroke="black" d="M276.311,-647.48C301.788,-630.715 335.341,-608.635 360.131,-592.321"/>
<polygon fill="black" stroke="black" points="362.077,-595.23 368.507,-586.809 358.229,-589.383 362.077,-595.23"/>
<text text-anchor="middle" x="347.185" y="-607.712" font-family="Times,serif" font-size="14.00">no</text>
</g>
<!-- UPDATE_COMPLETE_3 -->
<g id="node13" class="node"><title>UPDATE_COMPLETE_3</title>
<ellipse fill="none" stroke="black" cx="122.185" cy="-568.912" rx="95.2087" ry="18"/>
<text text-anchor="middle" x="122.185" y="-564.712" font-family="Times,serif" font-size="14.00">UPDATE_COMPLETE</text>
</g>
<!-- check_rollforward_cleanup&#45;&gt;UPDATE_COMPLETE_3 -->
<g id="edge9" class="edge"><title>check_rollforward_cleanup&#45;&gt;UPDATE_COMPLETE_3</title>
<path fill="none" stroke="black" d="M208.75,-645.379C190.313,-629.306 167.003,-608.984 149.217,-593.478"/>
<polygon fill="black" stroke="black" points="151.309,-590.659 141.471,-586.725 146.709,-595.935 151.309,-590.659"/>
<text text-anchor="middle" x="216.84" y="-607.712" font-family="Times,serif" font-size="14.00">yes (or no&#45;op)</text>
</g>
<!-- check_rollback_creates_and_updates -->
<g id="node15" class="node"><title>check_rollback_creates_and_updates</title>
<polygon fill="none" stroke="black" points="394.185,-440.912 245.028,-404.912 394.185,-368.912 543.341,-404.912 394.185,-440.912"/>
<text text-anchor="middle" x="394.185" y="-407.712" font-family="Times,serif" font-size="14.00">Did the rollback creates</text>
<text text-anchor="middle" x="394.185" y="-393.712" font-family="Times,serif" font-size="14.00">&amp; updates all succeed?</text>
</g>
<!-- try_rollback_creates_and_updates&#45;&gt;check_rollback_creates_and_updates -->
<g id="edge12" class="edge"><title>try_rollback_creates_and_updates&#45;&gt;check_rollback_creates_and_updates</title>
<path fill="none" stroke="black" d="M394.185,-477.752C394.185,-470.11 394.185,-460.712 394.185,-451.263"/>
<polygon fill="black" stroke="black" points="397.685,-451.071 394.185,-441.071 390.685,-451.071 397.685,-451.071"/>
</g>
<!-- check_rollback_creates_and_updates&#45;&gt;UPDATE_ROLLBACK_COMPLETE_CLEANUP_IN_PROGRESS -->
<g id="edge13" class="edge"><title>check_rollback_creates_and_updates&#45;&gt;UPDATE_ROLLBACK_COMPLETE_CLEANUP_IN_PROGRESS</title>
<path fill="none" stroke="black" d="M358.959,-377.136C338.138,-361.31 311.709,-341.221 290.117,-324.809"/>
<polygon fill="black" stroke="black" points="292.179,-321.98 282.1,-318.715 287.943,-327.553 292.179,-321.98"/>
<text text-anchor="middle" x="361.84" y="-339.712" font-family="Times,serif" font-size="14.00">yes (or no&#45;op)</text>
</g>
<!-- check_rollback_creates_and_updates&#45;&gt;UPDATE_ROLLBACK_FAILED -->
<g id="edge14" class="edge"><title>check_rollback_creates_and_updates&#45;&gt;UPDATE_ROLLBACK_FAILED</title>
<path fill="none" stroke="black" d="M415.82,-373.897C428.946,-352.749 443.185,-323.187 443.185,-294.456 443.185,-294.456 443.185,-294.456 443.185,-121 443.185,-95.7822 443.185,-67.0575 443.185,-46.5308"/>
<polygon fill="black" stroke="black" points="446.685,-46.3258 443.185,-36.3258 439.685,-46.3258 446.685,-46.3258"/>
<text text-anchor="middle" x="450.185" y="-208.8" font-family="Times,serif" font-size="14.00">no</text>
</g>
<!-- check_rollback_cleanup -->
<g id="node17" class="node"><title>check_rollback_cleanup</title>
<polygon fill="none" stroke="black" points="250.185,-158 123.925,-122 250.185,-86 376.445,-122 250.185,-158"/>
<text text-anchor="middle" x="250.185" y="-124.8" font-family="Times,serif" font-size="14.00">Did the rollback</text>
<text text-anchor="middle" x="250.185" y="-110.8" font-family="Times,serif" font-size="14.00">deletes all succeed?</text>
</g>
<!-- try_rollback_cleanup&#45;&gt;check_rollback_cleanup -->
<g id="edge16" class="edge"><title>try_rollback_cleanup&#45;&gt;check_rollback_cleanup</title>
<path fill="none" stroke="black" d="M250.185,-194.84C250.185,-187.198 250.185,-177.801 250.185,-168.352"/>
<polygon fill="black" stroke="black" points="253.685,-168.159 250.185,-158.159 246.685,-168.159 253.685,-168.159"/>
</g>
<!-- check_rollback_cleanup&#45;&gt;UPDATE_ROLLBACK_COMPLETE -->
<g id="edge17" class="edge"><title>check_rollback_cleanup&#45;&gt;UPDATE_ROLLBACK_COMPLETE</title>
<path fill="none" stroke="black" d="M222.583,-93.6659C206.708,-77.945 186.94,-58.3691 171.628,-43.2063"/>
<polygon fill="black" stroke="black" points="174.075,-40.703 164.506,-36.1534 169.149,-45.6768 174.075,-40.703"/>
<text text-anchor="middle" x="235.84" y="-56.8" font-family="Times,serif" font-size="14.00">yes (or no&#45;op)</text>
</g>
<!-- check_rollback_cleanup&#45;&gt;UPDATE_ROLLBACK_FAILED -->
<g id="edge18" class="edge"><title>check_rollback_cleanup&#45;&gt;UPDATE_ROLLBACK_FAILED</title>
<path fill="none" stroke="black" d="M293.498,-98.1092C326.17,-80.8419 370.672,-57.3227 402.648,-40.4238"/>
<polygon fill="black" stroke="black" points="404.521,-43.3923 411.727,-35.6253 401.251,-37.2035 404.521,-43.3923"/>
<text text-anchor="middle" x="383.185" y="-56.8" font-family="Times,serif" font-size="14.00">no</text>
</g>
</g>
</svg>
